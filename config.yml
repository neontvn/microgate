server:
  port: 8080

routes:
  - path: "/api/v1"
    backends:
      - "http://localhost:9001"
      - "http://localhost:9002"
      - "http://localhost:9003"
    strategy: "round-robin"
  - path: "/api/v2"
    backend: "http://localhost:9004"

ratelimit:
  max_tokens: 10
  refill_rate: 1.0

auth:
  api_keys:
    - "key-abc123"
    - "key-xyz789"
  jwt_secret: "my-super-secret-key"

circuitbreaker:
  threshold: 5
  timeout: 30

healthcheck:
  interval: 10

dashboard:
  enabled: true
  log_capacity: 1000
  sse_buffer: 256

analytics:
  enabled: true
  bucket_interval: "1m"
  retention: "48h"
  analyzer_interval: "5m"

adaptive_rate_limit:
  enabled: true
  multiplier: 3.0
  min_limit: 10
  max_limit: 10000
  learning_period: "1h"

weighted_lb:
  enabled: true
  rebalance_interval: "5m"

processes:
  - id: "backend-9001"
    command: "./tmp/testbackend"
    args: ["-port", "9001"]
    port: 9001
    auto_start: true
  - id: "backend-9002"
    command: "./tmp/testbackend"
    args: ["-port", "9002"]
    port: 9002
    auto_start: true
  - id: "backend-9003"
    command: "./tmp/testbackend"
    args: ["-port", "9003"]
    port: 9003
    auto_start: false
  - id: "backend-9004"
    command: "./tmp/testbackend"
    args: ["-port", "9004"]
    port: 9004
    auto_start: false